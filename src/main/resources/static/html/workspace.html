<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>My Workspaces</title>
    <link rel="stylesheet" type="text/css" href="../css/basic.min.css">
    <link rel="stylesheet" type="text/css" href="../css/dropzone.min.css">
</head>
<body>
<div class="dropzone dz-clickable" id="myDrop" action="/upload">
    <div class="dz-message" data-dz-message="">
        <span>Drop files here or click to upload.</span>
    </div>
</div>
<div>
</div>
<script type="text/javascript" src="webjars/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" src="../js/dropzone.min.js"></script>
<script>
    Dropzone.autoDiscover = false;
    Dropzone.prototype._getParamName = function (n) {
        if (typeof this.options.paramName === "function") {
            return this.options.paramName(n);
        } else {
            return "" + this.options.paramName;
        }
    };
    $(function () {
        let myDZ = new Dropzone("div#myDrop", {
            url: '/upload/code',
            method: "post",
            maxFilesize: 1,
            addRemoveLinks: true,
            acceptedFiles: ".java",
            createImageThumbnails: false,
            timeout: 0,
            uploadMultiple: true,
            parallelUploads: 5,
            params: {
                'codeId': 1
            },
            renameFile: function (file) {
                // console.log(file, file.webkitRelativePath);
                let newFilename = file.webkitRelativePath;
                return newFilename;
            },
            init: function () {
                this.hiddenFileInput.setAttribute("type", "file");
                this.hiddenFileInput.setAttribute("webkitdirectory", true);
            }
            // accept: function (file, done) {
            //     console.log(file);
            //     if (file.type === '.java') done();
            // }
        });
    });
</script>
</body>
</html>