<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>Statistics</title>
    <link rel="stylesheet" href="https://use.typekit.net/cpy1erx.css">

    <link rel="stylesheet" type="text/css" href="webjars/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="webjars/bootstrap/4.4.1-1/css/bootstrap.min.css">
    <style>
        html {
            height: 100%;
            margin: 0;
        }

        body {
            height: 100%;
            margin: 0;
            font-family: fira-sans, sans-serif;
            font-weight: 400;
            font-size: 14px;
            font-style: normal;
            color: #777;
        }

        .navbar-brand {
            font-family: flood-std, sans-serif;
            font-weight: 400;
            font-style: normal;
        }

        .nav-link {
            font-size: 1.2rem;
        }

        .received_msg {
            display: inline-block;
            padding: 0 0 0 10px;
            vertical-align: top;
            width: 92%;
        }

        .received_withd_msg p {
            background: #ebebeb none repeat scroll 0 0;
            border-radius: 3px;
            color: #646464;
            font-size: 14px;
            margin: 0;
            padding: 5px 10px 5px 12px;
            width: 100%;
        }

        .time_date {
            color: #747474;
            display: block;
            font-size: 12px;
            margin: 8px 0 0;
        }

        .received_withd_msg {
            width: 57%;
        }

        .mesgs {
            float: left;
            padding: 30px 15px 0 25px;
            width: 60%;
        }

        .sent_msg p {
            background: #05728f none repeat scroll 0 0;
            border-radius: 3px;
            font-size: 14px;
            margin: 0;
            color: #fff;
            padding: 5px 10px 5px 12px;
            width: 100%;
        }

        .outgoing_msg {
            overflow: hidden;
            margin: 26px 0 26px;
        }

        .sent_msg {
            float: right;
            width: 46%;
        }

        .input_msg_write input {
            background: rgba(0, 0, 0, 0) none repeat scroll 0 0;
            border: medium none;
            color: #4c4c4c;
            font-size: 15px;
            min-height: 48px;
            width: 100%;
        }

        .type_msg {
            border-top: 1px solid #c4c4c4;
            position: relative;
        }

        .msg_send_btn {
            background: #05728f none repeat scroll 0 0;
            border: medium none;
            border-radius: 50%;
            color: #fff;
            cursor: pointer;
            font-size: 17px;
            height: 33px;
            position: absolute;
            right: 0;
            top: 11px;
            width: 33px;
        }

        .messaging {
            padding: 0 0 50px 0;
        }

        .msg_history {
            height: 516px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
<script type="text/javascript" src="webjars/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type="text/javascript" src="webjars/popper.js/1.16.0/dist/umd/popper.min.js"></script>
<script type="text/javascript" src="webjars/bootstrap/4.4.1-1/js/bootstrap.min.js"></script>

<script type="text/javascript" src="../js/navbar.js"></script>

<script>
    $(function () {
        $.ajax({
            type: "get",
            url: "/statistics/getAllMes",
            headers: {"Authorization": $.cookie('token')},
            success: function (data) {
                if (data.success) {
                    let users = data.content.content;
                    console.log(users);
                    let h = "";
                    users.splice(0, 1);
                    users.forEach(function (user) {
                        if (user.codeMesVOs.length === 0) {
                            h += "<tr>\n" +
                                "<th scope=\"row\" rowspan=\"1\">" + user.userId + "</th>\n" +
                                "<td rowspan=\"1\">0</td>\n" +
                                "<td>-</td>\n" +
                                "<td>-</td>\n" +
                                "<td>-</td>\n" +
                                "<td>-</td>\n" +
                                "</tr>"
                        } else {
                            h += `
                                <tr>
                                    <th scope="row" rowspan="${user.codeMesVOs.length * 3}">${user.userId}</th>
                                    <td rowspan="${user.codeMesVOs.length * 3}">${user.codeMesVOs.length}</td>
                                    <td rowspan="3">${user.codeMesVOs[0].codeName}</td>
                                    <td>Vertex</td>
                                    <td>${user.codeMesVOs[0].numOfVertex}</td>
                                    <td>${user.codeMesVOs[0].numOfVertexLabel}</td>
                                </tr>
                                <tr>
                                    <td>Edge</td>
                                    <td>${user.codeMesVOs[0].numOfEdge}</td>
                                    <td>${user.codeMesVOs[0].numOfEdgeLabel}</td>
                                </tr>
                                <tr>
                                    <td>Domain</td>
                                    <td>${user.codeMesVOs[0].numOfDomain}</td>
                                    <td>${user.codeMesVOs[0].numOfDomainLabel}</td>
                                </tr>`;
                            for (let i = 1; i < user.codeMesVOs.length; i++) {
                                h += `
                                <tr>
                                    <td rowspan="3">${user.codeMesVOs[i].codeName}</td>
                                    <td>Vertex</td>
                                    <td>${user.codeMesVOs[i].numOfVertex}</td>
                                    <td>${user.codeMesVOs[i].numOfVertexLabel}</td>
                                </tr>
                                <tr>
                                    <td>Edge</td>
                                    <td>${user.codeMesVOs[i].numOfEdge}</td>
                                    <td>${user.codeMesVOs[i].numOfEdgeLabel}</td>
                                </tr>
                                <tr>
                                    <td>Domain</td>
                                    <td>${user.codeMesVOs[i].numOfDomain}</td>
                                    <td>${user.codeMesVOs[i].numOfDomainLabel}</td>
                                </tr>`;
                            }

                        }
                    });
                    $("#user-num").text(Number(data.content.numOfUser) - 1);
                    $("#all-info").html(h);
                }
            },
            error: function (err) {
                console.log(err);
            }
        });
    });
</script>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top p-0">
    <a class="navbar-brand h1 m-0 col-2" href="#">üë¥ Old2Dimension</a>
    <div class="collapse navbar-collapse col-10 px-0">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#">Statistics<span class="sr-only">(current)</span></a>
            </li>
        </ul>
        <div class="d-flex">
            <button class="btn mx-2 text-white" id="note">
                <i class="fa fa-bell-o"></i>
                <span class="badge badge-light badge-pill">20</span>
            </button>
            <button class="btn btn-outline-light mx-2" id="sign-out-btn">Sign Out</button>
        </div>
    </div>
</nav>

<div class="container-fluid row px-0 no-gutters" style="
position: absolute;
top: 0;
left: 20%;
width: 60%;
padding-top: 40px;
height: 100%;
">
    <div class="col-3 nav flex-column nav-pills bg-light" id="v-pills-tab" role="tablist" aria-orientation="vertical"
    >
        <a class="h2 mx-auto my-3">NOTIFICATION</a>
        <a class="nav-link active" id="invitation-tab" data-toggle="pill" href="#invitation" role="tab"
           aria-controls="v-pills-home" aria-selected="true">‚óè Invitation<span class="badge badge-primary badge-pill">5</span></a>
        <a class="nav-link" id="group-tab" data-toggle="pill" href="#group" role="tab"
           aria-controls="v-pills-profile" aria-selected="false">‚óè Group<span class="badge badge-primary badge-pill">5</span></a>
        <a class="nav-link" id="message-tab" data-toggle="pill" href="#message" role="tab"
           aria-controls="v-pills-messages" aria-selected="false">‚óè Message<span class="badge badge-primary badge-pill">10</span></a>
    </div>
    <div class="col-9 tab-content" id="v-pills-tabContent">
        <div class="tab-pane fade show active" id="invitation" role="tabpanel" aria-labelledby="invitation-tab">
            <div class="card m-2">
                <div class="card-body m-0 h4">
                    Invitation
                </div>
            </div>
            <div class="card m-2">
                <div class="card-body m-0 h5">
                    <div>xxx invite you to join in a group.</div>
                    <div class="my-2" style="text-align: right">
                        <button class="btn btn-primary">Agree</button>
                        <button class="btn btn-danger">Reject</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="group" role="tabpanel" aria-labelledby="group-tab">
            <div class="card m-2">
                <div class="card-body m-0 h4">
                    Group
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="message" role="tabpanel" aria-labelledby="message-tab">
            <div class="messaging container-fluid row" style="height: 100%">
                <div class="inbox_people col-4">
                    <div class="recent_heading mx-1 my-2">
                        <h4>Recent</h4>
                    </div>
                    <div class="inbox_chat">
                        <div class="chat_list active_chat card m-1">
                            <div class="card-body">
                                <h5 class="card-title">Sunil Rajput</h5>
                                <h6 class="card-subtitle mb-2 text-muted">Dec 25</h6>
                                <p class="card-text">Some quick example ...</p>
                            </div>
                        </div>
                        <div class="chat_list card m-1">
                            <div class="card-body">
                                <h5 class="card-title">Sunil Rajput</h5>
                                <h6 class="card-subtitle mb-2 text-muted">Dec 25</h6>
                                <p class="card-text">Some quick example ...</p>
                            </div>
                        </div>
                        <div class="chat_list card m-1">
                            <div class="card-body">
                                <h5 class="card-title">Sunil Rajput</h5>
                                <h6 class="card-subtitle mb-2 text-muted">Dec 25</h6>
                                <p class="card-text">Some quick example ...</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mesgs col-8">
                    <div class="msg_history">
                        <div class="incoming_msg">
                            <div class="received_msg">
                                <div class="received_withd_msg">
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua.</p>
                                    <span class="time_date"> 11:01 AM    |    June 9</span></div>
                            </div>
                        </div>
                        <div class="outgoing_msg">
                            <div class="sent_msg">
                                <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex
                                    ea commodo consequat.</p>
                                <span class="time_date"> 11:01 AM    |    June 9</span></div>
                        </div>
                        <div class="incoming_msg">
                            <div class="received_msg">
                                <div class="received_withd_msg">
                                    <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
                                        fugiat nulla pariatur.</p>
                                    <span class="time_date"> 11:01 AM    |    Yesterday</span></div>
                            </div>
                        </div>
                        <div class="outgoing_msg">
                            <div class="sent_msg">
                                <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
                                    mollit anim id est laborum.</p>
                                <span class="time_date"> 11:01 AM    |    Today</span></div>
                        </div>
                        <div class="incoming_msg">
                            <div class="received_msg">
                                <div class="received_withd_msg">
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                                        nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
                                        fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
                                        culpa qui officia deserunt mollit anim id est laborum.</p>
                                    <span class="time_date"> 11:01 AM    |    Today</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="type_msg">
                        <div class="input_msg_write">
                            <input type="text" class="write_msg" placeholder="Type a message"/>
                            <button class="msg_send_btn" type="button"><i class="fa fa-paper-plane-o"
                                                                          aria-hidden="true"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--    <nav class="col-3 bg-light sidebar sidebar-left overflow-auto" id="nt-type">-->
        <!--        -->
        <!--    </nav>-->
    </div>
</body>
</html>